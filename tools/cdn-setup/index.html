<!DOCTYPE html>
<html lang="en">
<head>
  <meta
    http-equiv="Content-Security-Policy"
    content="script-src 'nonce-aem' 'strict-dynamic'; base-uri 'self'; object-src 'none';"
    move-to-http-header="true"
  >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="lab" content="true">
  <title>CDN Setup | AEM Tools</title>
  <script nonce="aem" src="/scripts/aem.js" type="module"></script>
  <script nonce="aem" src="/scripts/scripts.js" type="module"></script>
  <link rel="stylesheet" href="/utils/config/config.css" />
  <link rel="stylesheet" href="/styles/styles.css" />
  <script nonce="aem" src="/tools/cdn-setup/cdn-setup.js" type="module"></script>
  <link rel="stylesheet" href="/tools/cdn-setup/cdn-setup.css" />
</head>
<body class="cdn-setup">
  <header></header>
  <main>
    <div>
      <h1>CDN Setup</h1>
      <p>
        Configure your content delivery network (CDN) to automatically purge outdated content on your 
        production domain whenever an author publishes changes. Select your site, choose a CDN provider, 
        and validate your credentials before saving.
      </p>
      <p>See <a href="https://www.aem.live/docs/byo-cdn-setup" target="_blank">BYO CDN Setup</a> documentation to learn more.</p>
    </div>

    <div>
      <form id="admin-form">
        <section class="form-field config-field">
          <div class="form-field org-field">
            <label for="org">Organization</label>
            <input name="org" id="org" list="org-list" autocomplete="off" required />
            <datalist id="org-list"></datalist>
          </div>
          <div class="form-field site-field">
            <label for="site">Site</label>
            <input name="site" id="site" list="site-list" autocomplete="off" disabled />
            <datalist id="site-list"></datalist>
          </div>
        </section>
        <p class="button-wrapper">
          <button type="submit" id="fetch" class="button">Fetch</button>
        </p>
      </form>
    </div>

    <div>
      <form id="cdn-form" aria-hidden="true" disabled>
        <div class="form-field">
          <label for="host">Production Host</label>
          <input id="host" name="host" type="text" placeholder="e.g. www.yourdomain.com" required />
          <div class="field-help-text">
            <p>Host name of production site, e.g. <code>www.yourdomain.com</code></p>
          </div>
        </div>

        <fieldset class="cdn-type-selector">
          <legend>CDN Type</legend>
          <ul class="cdn-type-list">
            <li data-cdn="managed">
              <label for="cdn-managed">
                <img src="/icons/adobe.svg" alt="Adobe">
                <span>Managed</span>
                <input id="cdn-managed" name="cdn-type" value="managed" type="radio" />
              </label>
              <a class="docs" href="https://www.aem.live/docs/go-live-checklist#cdn-configuration" target="_blank">Setup Docs</a>
            </li>
            <li data-cdn="akamai">
              <label for="cdn-akamai">
                <img src="./assets/akamai-logo.svg" alt="Akamai">
                <input id="cdn-akamai" name="cdn-type" value="akamai" type="radio" />
              </label>
              <a class="docs" href="https://www.aem.live/docs/byo-cdn-akamai-setup" target="_blank">Setup Docs</a>
            </li>
            <li data-cdn="fastly">
              <label for="cdn-fastly">
                <img src="./assets/fastly-logo.svg" alt="Fastly">
                <input id="cdn-fastly" name="cdn-type" value="fastly" type="radio" />
              </label>
              <a class="docs" href="https://www.aem.live/docs/byo-cdn-fastly-setup" target="_blank">Setup Docs</a>
            </li>
            <li data-cdn="cloudflare">
              <label for="cdn-cloudflare">
                <img src="./assets/cloudflare-logo.svg" alt="Cloudflare">
                <input id="cdn-cloudflare" name="cdn-type" value="cloudflare" type="radio" />
              </label>
              <a class="docs" href="https://www.aem.live/docs/byo-cdn-cloudflare-worker-setup" target="_blank">Setup Docs</a>
            </li>
            <li data-cdn="cloudfront">
              <label for="cdn-cloudfront">
                <img src="./assets/cloudfront-logo.svg" alt="CloudFront">
                <span>CloudFront</span>
                <input id="cdn-cloudfront" name="cdn-type" value="cloudfront" type="radio" />
              </label>
              <a class="docs" href="https://www.aem.live/docs/byo-cdn-cloudfront-setup" target="_blank">Setup Docs</a>
            </li>
          </ul>
        </fieldset>

        <div id="cdn-fields" class="cdn-fields">
          <!-- CDN-specific fields will be dynamically added here -->
        </div>

        <div id="validation-results" class="validation-results" aria-hidden="true">
          <h3>Validation Results</h3>
          <div class="validation-item" data-test="urlPurge">
            <span class="validation-icon"></span>
            <div class="validation-content">
              <strong>URL Purge</strong>
              <span class="validation-message"></span>
              <details class="validation-details">
                <summary>Show details</summary>
                <pre><code></code></pre>
              </details>
            </div>
          </div>
          <div class="validation-item" data-test="keyPurge">
            <span class="validation-icon"></span>
            <div class="validation-content">
              <strong>Key Purge</strong>
              <span class="validation-message"></span>
              <details class="validation-details">
                <summary>Show details</summary>
                <pre><code></code></pre>
              </details>
            </div>
          </div>
        </div>

        <div class="button-bar">
          <div class="button-wrapper">
            <button type="button" id="validate" class="button outline" style="display: none">Validate</button>
            <button type="submit" id="save" class="button">Save</button>
          </div>
        </div>
      </form>
    </div>

    <div>
      <div class="console"></div>
    </div>
  </main>
  <footer></footer>
</body>
</html>
